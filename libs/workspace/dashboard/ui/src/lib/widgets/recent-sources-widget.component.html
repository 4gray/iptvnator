<app-dashboard-widget-shell
    [eyebrow]="'WORKSPACE.DASHBOARD.LIBRARY' | translate"
    [title]="'WORKSPACE.DASHBOARD.RECENT_SOURCES' | translate"
>
    <a widget-actions routerLink="/workspace/sources">{{
        'WORKSPACE.DASHBOARD.MANAGE_ALL' | translate
    }}</a>
    @if (data.recentPlaylists().length > 0) {
        <div class="source-list">
            @for (item of data.recentPlaylists(); track item._id) {
                <a class="source-row" [routerLink]="data.getPlaylistLink(item)">
                    <div class="source-row__head">
                        <span class="provider">
                            {{ data.getPlaylistProvider(item) }}
                        </span>
                        @if (item.count) {
                            <span class="count"
                                >{{ item.count }}
                                {{
                                    'WORKSPACE.DASHBOARD.CHANNELS' | translate
                                }}</span
                            >
                        }
                    </div>
                    <h4
                        [attr.title]="
                            item.title ||
                            item.filename ||
                            ('WORKSPACE.DASHBOARD.UNTITLED_SOURCE' | translate)
                        "
                    >
                        {{
                            item.title ||
                                item.filename ||
                                ('WORKSPACE.DASHBOARD.UNTITLED_SOURCE'
                                    | translate)
                        }}
                    </h4>
                    <p>
                        {{
                            data.formatTimestamp(
                                item.updateDate || item.importDate
                            )
                        }}
                    </p>
                </a>
            }
        </div>
    } @else {
        <article class="empty-state">
            <p>{{ 'WORKSPACE.DASHBOARD.NO_SOURCES' | translate }}</p>
            <a routerLink="/workspace/sources">{{
                'WORKSPACE.DASHBOARD.OPEN_SOURCES' | translate
            }}</a>
        </article>
    }
</app-dashboard-widget-shell>
