<mat-list-item (click)="playlistClicked.emit(item._id)">
    @if (item.url) {
        <div class="icon-container" matListItemIcon>
            <mat-icon
                class="upload-type-icon"
                [matTooltip]="
                    ('HOME.PLAYLISTS.ADDED_VIA_URL' | translate) + ' ' + item.url
                "
                >cloud</mat-icon
            >
            @if (item.autoRefresh) {
                <mat-icon
                    class="auto-refresh-indicator"
                    [matTooltip]="'HOME.PLAYLISTS.AUTO_REFRESH_ENABLED' | translate"
                    >autorenew</mat-icon
                >
            }
        </div>
    }
    @if (!item.url && !item.serverUrl && !item.macAddress) {
        <div class="icon-container" matListItemIcon>
            <mat-icon
                class="upload-type-icon"
                [matTooltip]="'HOME.PLAYLISTS.ADDED_VIA_FILE' | translate"
                >folder</mat-icon
            >
            @if (item.autoRefresh) {
                <mat-icon
                    class="auto-refresh-indicator"
                    [matTooltip]="'HOME.PLAYLISTS.AUTO_REFRESH_ENABLED' | translate"
                    >autorenew</mat-icon
                >
            }
        </div>
    }
    @if (item.serverUrl) {
        <div class="icon-container" matListItemIcon>
            <mat-icon
                class="upload-type-icon"
                [matTooltip]="'HOME.PLAYLISTS.XTREAM_PLAYLIST' | translate"
                >public</mat-icon
            >
            <span
                class="status-dot"
                [class]="getStatusClass()"
                [matTooltip]="'Portal status: ' + portalStatus"
                [attr.aria-label]="'Portal status: ' + portalStatus"
            ></span>
        </div>
    }
    @if (item.macAddress) {
        <mat-icon
            matListItemIcon
            class="upload-type-icon"
            [matTooltip]="'HOME.PLAYLISTS.STALKER_PORTAL' | translate"
            >dashboard</mat-icon
        >
    }
    <div matListItemTitle>
        {{ item.title || item.filename }}
    </div>
    <div matListItemLine class="meta">
        @if (!item.serverUrl && !item.portalUrl) {
            {{ 'HOME.PLAYLISTS.CHANNELS' | translate }}: {{ item.count }}
            @if (item.importDate.length > 3) {
                | {{ 'HOME.PLAYLISTS.ADDED' | translate }}:
                {{ item.importDate | date }}
            }
            @if (item.updateDate) {
                | {{ 'HOME.PLAYLISTS.UPDATED' | translate }}:
                {{ item.updateDate | date: 'MMMM d, yyyy, HH:mm' }}
            }
            @if (item.updateState === 2) {
                <mat-icon
                    [matTooltip]="
                        'HOME.PLAYLISTS.INFO_DIALOG.UPDATE_FAILED' | translate
                    "
                    [inline]="true"
                    >warning</mat-icon
                >
            }
        } @else {
            @if (item.macAddress) {
                Stalker Portal
            } @else {
                Xtream Code Playlist
            }
            @if (item.importDate.length > 3) {
                | {{ 'HOME.PLAYLISTS.ADDED' | translate }}:
                {{ item.importDate | date }}
            }
            @if (item.updateDate) {
                | {{ 'HOME.PLAYLISTS.UPDATED' | translate }}:
                {{ item.updateDate | date: 'MMMM d, yyyy, HH:mm' }}
            }
        }
    </div>

    @if (showActions()) {
        <span matListItemMeta class="action-buttons">
            @if (item.url || item.filePath) {
                <button
                    mat-icon-button
                    class="refresh-btn"
                    color="accent"
                    (click)="
                        $event.stopPropagation(); refreshClicked.emit(item)
                    "
                    [matTooltip]="'HOME.PLAYLISTS.REFRESH' | translate"
                >
                    <mat-icon>sync</mat-icon>
                </button>
            }
            @if (item.serverUrl) {
                <button
                    mat-icon-button
                    class="refresh-btn"
                    color="accent"
                    (click)="
                        $event.stopPropagation(); refreshClicked.emit(item)
                    "
                    [matTooltip]="'HOME.PLAYLISTS.REFRESH_XTREAM' | translate"
                >
                    <mat-icon>sync</mat-icon>
                </button>
            }

            <button
                mat-icon-button
                color="accent"
                class="edit-btn"
                (click)="
                    $event.stopPropagation(); editPlaylistClicked.emit(item)
                "
                [matTooltip]="'HOME.PLAYLISTS.SHOW_DETAILS' | translate"
            >
                <mat-icon>edit</mat-icon>
            </button>

            <button
                mat-icon-button
                color="accent"
                class="delete-btn"
                (click)="$event.stopPropagation(); removeClicked.emit(item._id)"
                [matTooltip]="'HOME.PLAYLISTS.REMOVE' | translate"
            >
                <mat-icon>delete</mat-icon>
            </button>
        </span>
    }
</mat-list-item>
