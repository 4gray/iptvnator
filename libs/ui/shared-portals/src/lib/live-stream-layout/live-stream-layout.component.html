<div
    [class]="
        player === 'videojs' || player === 'html5'
            ? 'itv-container'
            : 'itv-container-epg'
    "
>
    <div
        class="sidebar"
        appResizable
        [minWidth]="250"
        [maxWidth]="600"
        [defaultWidth]="400"
        storageKey="sidebar-width"
    >
        <div class="sidebar-content">
            <div class="search-panel">
                <mat-form-field class="search-bar">
                    <mat-icon matPrefix>search</mat-icon>
                    <input
                        matInput
                        type="search"
                        [placeholder]="'CHANNELS.SEARCH_CHANNEL' | translate"
                        [(ngModel)]="searchString"
                    />
                </mat-form-field>
            </div>
            <div class="nav-list" style="height: calc(100% - 70px)">
                <cdk-virtual-scroll-viewport
                    [itemSize]="56"
                    class="scroll-viewport-portals"
                >
                    <div
                        class="nav-item"
                        *cdkVirtualFor="
                            let item of channels
                                | filterBy: searchString() : 'name';
                            trackBy: trackBy;
                            templateCacheSize: 0
                        "
                        [class.selected]="
                            item.stream_id === activeLiveStream?.stream_id
                        "
                        (click)="itemClicked.emit(item)"
                    >
                        @if (item.stream_icon) {
                            <img
                                class="stream-icon"
                                [src]="item.stream_icon"
                                alt="channel icon"
                            />
                        }
                        <div class="title">
                            {{ item.name }}
                        </div>
                    </div>
                </cdk-virtual-scroll-viewport>
            </div>
        </div>
    </div>
    @if (player === 'videojs' || player === 'html5') {
        @if (streamUrl) {
            <div class="video-player">
                <app-web-player-view [streamUrl]="streamUrl" />
            </div>
        }
    }
    @if (streamUrl) {
        <div class="epg">
            <div class="epg-content">
                <app-epg-view [epgItems]="epgItems" />
            </div>
        </div>
    } @else {
        <div class="no-channel-selected">
            {{ 'PORTALS.SELECT_CATEGORY' | translate }}
        </div>
    }
</div>
