<div
    class="sidebar"
    appResizable
    [minWidth]="250"
    [maxWidth]="600"
    [defaultWidth]="400"
    storageKey="sidebar-width"
>
    <div class="sidebar-header">
        <app-playlist-switcher
            class="switcher"
            [currentTitle]="playlistTitle()"
            [subtitle]="playlistSubtitle()"
        />
    </div>
    <app-category-view
        [items]="categories()"
        [selectedCategoryId]="$any(selectedCategoryId())"
        (categoryClicked)="setCategoryId($event.category_id)"
    />
</div>

<div class="main-content">
    <div class="content-header">
        <h2>
            <button mat-icon-button disabled>
                <mat-icon>movie</mat-icon>
            </button>
            {{
                (titleTranslationString() | translate) +
                    ' (' +
                    selectedCategoryId() +
                    ')'
            }}
        </h2>
    </div>
    <div class="scrollable-content">
        @if (favorites().length) {
            <div class="items-grid">
                @for (item of favorites(); track $index) {
                    <div class="item-card" (click)="openFavorite(item)">
                        <div class="thumbnail-wrapper">
                            <button
                                mat-icon-button
                                class="remove-button"
                                [matTooltip]="'CHANNELS.REMOVE_FAVORITE' | translate"
                                (click)="$event.stopPropagation(); removeFromFavorites(item)"
                            >
                                <mat-icon>close</mat-icon>
                            </button>
                            <img
                                [src]="
                                    item.poster_url ||
                                    item.cover ||
                                    './assets/images/default-poster.png'
                                "
                                (error)="
                                    $event.target.src =
                                        './assets/images/default-poster.png'
                                "
                                [alt]="item.title"
                                class="poster"
                            />
                            <span class="type-badge" [class]="item.type">
                                {{ item.type }}
                            </span>
                        </div>
                        <div class="item-info">
                            <h3>{{ item?.title || item?.details?.info?.name }}</h3>
                            <p class="added-date">
                                {{ item?.added_at | date: 'd MMM, HH:mm' }}
                            </p>
                        </div>
                    </div>
                }
            </div>
        } @else {
            <div class="no-items">
                <mat-icon>favorite_border</mat-icon>
                <p>No items in the selected category</p>
            </div>
        }
    </div>
    <!-- <app-mpv-player-bar /> -->
</div>
