@if (!isWorkspaceLayout) {
    <div
        class="sidebar"
        appResizable
        [minWidth]="250"
        [maxWidth]="600"
        [defaultWidth]="400"
        storageKey="sidebar-width"
    >
        @if (!isWorkspaceLayout) {
            <div class="sidebar-header">
                <app-playlist-switcher
                    class="switcher"
                    [currentTitle]="currentPlaylist()?.title || 'Portal'"
                    [subtitle]="'Stalker Portal'"
                />
            </div>
        }
        @if (isCategoryLoading()) {
            <div class="category-skeleton" aria-hidden="true">
                @for (row of skeletonRows; track row) {
                    <div class="category-skeleton__row">
                        <span class="category-skeleton__dot"></span>
                        <span
                            class="category-skeleton__label"
                            [style.width.%]="skeletonLabelWidths[row]"
                        ></span>
                        <span class="category-skeleton__count"></span>
                    </div>
                }
            </div>
        } @else if (isCategoryFailed()) {
            <app-playlist-error-view
                [title]="'PORTALS.ERROR_VIEW.UNKNOWN_ERROR.TITLE' | translate"
                [description]="
                    'PORTALS.ERROR_VIEW.UNKNOWN_ERROR.DESCRIPTION' | translate
                "
            />
        } @else {
            <app-category-view
                [items]="categories()"
                [selectedCategoryId]="$any(stalkerStore.selectedCategoryId())"
                (categoryClicked)="categoryClicked($event)"
            />
        }
    </div>
}

<div class="main-content">
    @if (!isWorkspaceLayout && !stalkerStore.selectedItem()) {
        <div class="content-header">
            <h2>
                <button mat-icon-button disabled>
                    <mat-icon>category</mat-icon>
                </button>

                {{ getContentLabel() }}

                @if (
                    !contentItems() &&
                    !isContentLoading() &&
                    !stalkerStore.selectedCategoryId()
                ) {
                    <h2>
                        {{ 'PORTALS.SELECT_CATEGORY' | translate }}
                    </h2>
                }
            </h2>
        </div>
    }

    <div
        class="scrollable-content"
        [class.no-header]="isWorkspaceLayout || stalkerStore.selectedItem()"
    >
        <router-outlet />
    </div>
</div>
