<div class="context-column">
    <header class="context-header">
        <div class="context-header__top">
            <h2>{{ title() }}</h2>
            @if (isXtreamCategories()) {
                <button
                    mat-icon-button
                    [matTooltip]="'Manage categories'"
                    aria-label="Manage categories"
                    (click)="openXtreamCategoryManagement()"
                >
                    <mat-icon>tune</mat-icon>
                </button>
            }
        </div>
        <!-- @if (subtitle(); as text) {
            <span class="context-header__badge">{{ text }}</span>
        } -->
    </header>

    <div class="context-divider"></div>

    @if (isXtreamCategories()) {
        <app-category-view
            [items]="xtreamCategories()"
            [selectedCategoryId]="xtreamSelectedCategoryId()"
            [itemCounts]="xtreamCategoryItemCounts()"
            [showCounts]="true"
            (categoryClicked)="onXtreamCategoryClicked($event)"
        />
    } @else if (isStalkerCategories()) {
        @if (isStalkerCategoryLoading()) {
            <div class="context-skeleton" aria-hidden="true">
                @for (row of skeletonRows; track row) {
                    <div class="context-skeleton__row">
                        <span class="context-skeleton__dot"></span>
                        <span
                            class="context-skeleton__label"
                            [style.width.%]="skeletonLabelWidths[row]"
                        ></span>
                        <span class="context-skeleton__count"></span>
                    </div>
                }
            </div>
        } @else if (isStalkerCategoryFailed()) {
            <app-playlist-error-view
                [title]="'Unable to load categories'"
                [description]="'Please retry or verify portal settings.'"
                [showActionButtons]="false"
            />
        } @else {
            <app-category-view
                [items]="stalkerCategories()"
                [selectedCategoryId]="$any(stalkerSelectedCategoryId())"
                (categoryClicked)="onStalkerCategoryClicked($any($event))"
            />
        }
    }
</div>
